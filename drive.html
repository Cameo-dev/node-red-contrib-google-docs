<script type="text/javascript">
	RED.nodes.registerType('google-drive',{
		category: 'google',
		color: '#4697f4',
		defaults: {
			name: {value:""},
			admin: {type: 'google auth', required: true},
			fileId:{value: ""},
			operation: {value: "get"},
			allDrives: {value: false},
			targetName: {value: ""},
      mime: {value: "nop"}
		},
		inputs:1,
		outputs:1,
		icon: "drive.png",
		label: function() {
			return this.name || "Google Drive";
		},
		oneditprepare: function() {
			$("#node-input-operation").on("change", function() {
				const val = $(this).val();
				if(val === 'copy') {
					$("#node-input-targetName-row").show();
					$("#node-input-mime-row").show();
				} else {
					$("#node-input-targetName-row").hide();
					$("#node-input-mime-row").hide();
				}
			});
		}
	});
</script>

<script type="text/html" data-template-name="google-drive">
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-input-admin"><i class="fa fa-cogs"></i> Admin</label>
        <input type="text" id="node-input-admin" placeholder="Admin">
    </div>
    <div class="form-row">
        <label for="node-input-fileId"><i class="fa fa-file-o"></i> File ID</label>
        <input type="text" id="node-input-fileId" placeholder="File ID">
    </div>
    <div class="form-row">
        <label for="node-input-operation"><i class="fa fa-magic"></i> Operation</label>
        <select name="operation" id="node-input-operation">
					<option value="get">Get</option>
					<option value="copy">Copy</option>
				</select>
    </div>
    <div class="form-row flex">
        <label for="node-input-allDrives"><i class="fa fa-database"></i> Search in all Drives</label>
        <input type="checkbox" id="node-input-allDrives">
    </div>
    <div class="form-row" id="node-input-targetName-row">
        <label for="node-input-targetName"><i class="fa fa-file"></i> Copy name</label>
        <input type="text" id="node-input-targetName" placeholder="Copy">
    </div>
    <div class="form-row" id="node-input-mime-row">
        <label for="node-input-mime"><i class="fa fa-exchange"></i> Convert to</label>
        <select name="mime" id="node-input-mime">
					<option selected value="nop">Do not convert</option>
					<option value="document">Google Docs</option>
					<option value="slides">Google Slides</option>
					<option value="spreadsheets">Google Spreadsheets</option>
				</select>
    </div>

</script>

<style type="text/css">
.form-row.flex {
  display: flex;
  align-items: center;
}
</style>

<script type="text/html" data-help-name="google-drive">
    <p>Let you access Google Drive API</p>
</script>
